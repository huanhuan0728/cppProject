# tcp

第一次握手是客户端向服务器发送一个SYN=1，SEQ = x（这个就是一个随机的序号）
第二次握手是SYN = 1， ACK = 1

第二次握手是服务器收到请求报文后，如果同意建立连接，则向客户端发送连接请求确认报文段，报文段首部的同步位SYN和确认为ACK都设置为1，表示这是一个TCP连接请求确认报文段

SYN：客户端发送一个SYN（同步）包，表示请求建立连接；服务器收到SYN包后，回复一个SYN-ACK包，表示同意连接，并确认客户端的请求；客户端收到SYN-ACK包后，发送一个ACK包，确认连接建立。

tcp 协议解决的是在一个不可靠信道上保证可靠连接的问题。
第一次握手之后，服务器能确认客户端的发送和自己的接受是正常的
第二次握手之后，客户端能确认自己和对方的收发都是正常的
第三次握手之后，服务器可以确认对方的接收和自己的发送是正常的
由此建立起一个可靠的连接

## 四次挥手
客户端向服务器发送一个FIN（Finish）包，表示客户端希望终止连接。这个包的标志位是FIN，表示客户端没有数据发送了，只是希望关闭连接。发送FIN后，客户端进入FIN_WAIT_1状态。

服务器接收到客户端的FIN包后，确认客户端希望关闭连接，服务器发送一个ACK包，表示确认客户端的关闭请求。这个ACK包确认号为客户端FIN包的序号加1。送完ACK包后，服务器进入CLOSE_WAIT状态，等待关闭连接。

服务器准备好关闭连接时，向客户端发送一个FIN包，表示服务器也希望关闭连接。服务器发送完FIN包后，进入LAST_ACK状态，等待客户端的确认。

客户端接收到服务器的FIN包后，发送一个ACK包来确认，确认号为服务器FIN包的序号加1。发送完ACK包后，客户端进入TIME_WAIT状态，等待足够的时间确保服务器接收到ACK包后再完全关闭连接。

四次挥手是为了确保双方都能安全的关闭连接，避免数据丢失或者错误关闭

# udp

内存损耗很小，稳定性弱
只是把包封装一下发出去即可


